<!DOCTYPE html>
{% assign current_lang = page.lang | default: site.default_lang %}
<html lang="{{ current_lang }}">

<head>
  {% include head.html %}
</head>

<body class="{% if page.body_class %}{{ page.body_class }}{% endif %}">
  {% unless page.no_bg %}
  <div class="gradient-background"></div>
  <!-- Animations diffÃ©rÃ©es aprÃ¨s LCP pour ne pas impacter les Core Web Vitals -->
  <div class="animated-background" style="opacity: 0; will-change: opacity;">
    <div class="floating-particles">
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
  </div>
  <!-- Bulles animÃ©es rÃ©duites pour performance -->
  <div class="animated-bubbles" style="opacity: 0; will-change: opacity;">
    <div class="bubble-element"></div>
    <div class="bubble-element"></div>
  </div>
  <!-- Activation des animations aprÃ¨s le chargement initial -->
  <script>
    window.addEventListener('load', function () {
      setTimeout(function () {
        var animBg = document.querySelector('.animated-background');
        var animBubbles = document.querySelector('.animated-bubbles');
        if (animBg) {
          animBg.style.transition = 'opacity 0.5s ease-in';
          animBg.style.opacity = '1';
        }
        if (animBubbles) {
          animBubbles.style.transition = 'opacity 0.5s ease-in';
          animBubbles.style.opacity = '1';
        }
      }, 500);
    });
  </script>
  {% endunless %}

  {% if site.under_construction %}
  <div class="under-construction-banner">
    <p>ðŸš§ Ce site est actuellement en construction. Certaines sections peuvent Ãªtre incomplÃ¨tes ou en cours de mise Ã 
      jour. Merci de votre comprÃ©hension ! ðŸš§</p>
  </div>
  {% endif %}
  {% include header-modern.html %}

  <main class="content" style="margin-top:0;">
    {{ content }}
  </main>

  {% include footer.html %}
  {% include analytics.html %}

  <!-- Scripts diffÃ©rÃ©s pour performance - ChargÃ©s aprÃ¨s le contenu -->
  <script src="/assets/js/modern-animations.js" defer></script>
  <script src="/assets/js/scroll-animations.js" defer></script>
  <script src="{{ '/assets/js/expertise-tabs.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/draft-preview.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/cookie-consent.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/image-optimization.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/sw-register.js' | relative_url }}" defer></script>

</body>

</html>